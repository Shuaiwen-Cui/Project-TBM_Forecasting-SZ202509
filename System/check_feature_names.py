#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ£€æŸ¥app.pyä¸­çš„ç‰¹å¾åç§°æ˜¯å¦ä¸CSVæ–‡ä»¶ä¸€è‡´
"""

import csv
import sys

def check_feature_names():
    """æ£€æŸ¥ç‰¹å¾åç§°å¯¹åº”å…³ç³»"""
    
    # ä»CSVæ–‡ä»¶è¯»å–ç‰¹å¾åç§°
    csv_names = []
    with open('tbm_feature_mapping_correctified.csv', 'r', encoding='utf-8') as f:
        reader = csv.DictReader(f)
        for row in reader:
            csv_names.append(row['ç‰¹å¾å'])
    
    # ä»app.pyè¯»å–ç‰¹å¾åç§°
    app_names = [
        'è´¯å…¥åº¦', 'æ¨è¿›åŒºé—´çš„å‹åŠ›ï¼ˆä¸Šï¼‰', 'æ¨è¿›åŒºé—´çš„å‹åŠ›ï¼ˆå³ï¼‰', 'æ¨è¿›åŒºé—´çš„å‹åŠ›ï¼ˆä¸‹ï¼‰', 'æ¨è¿›åŒºé—´çš„å‹åŠ›ï¼ˆå·¦ï¼‰',
        'åœŸèˆ±åœŸå‹ï¼ˆå³ï¼‰', 'åœŸèˆ±åœŸå‹ï¼ˆå³ä¸‹ï¼‰', 'åœŸèˆ±åœŸå‹ï¼ˆå·¦ï¼‰', 'åœŸèˆ±åœŸå‹ï¼ˆå·¦ä¸‹ï¼‰',
        'No.16æ¨è¿›åƒæ–¤é¡¶é€Ÿåº¦', 'No.4æ¨è¿›åƒæ–¤é¡¶é€Ÿåº¦', 'No.8æ¨è¿›åƒæ–¤é¡¶é€Ÿåº¦', 'No.12æ¨è¿›åƒæ–¤é¡¶é€Ÿåº¦',
        'æ¨è¿›æ²¹ç¼¸æ€»æ¨åŠ›', 'No.16æ¨è¿›åƒæ–¤é¡¶è¡Œç¨‹', 'No.4æ¨è¿›åƒæ–¤é¡¶è¡Œç¨‹', 'No.8æ¨è¿›åƒæ–¤é¡¶è¡Œç¨‹', 'No.12æ¨è¿›åƒæ–¤é¡¶è¡Œç¨‹',
        'æ¨è¿›å¹³å‡é€Ÿåº¦', 'åˆ€ç›˜è½¬é€Ÿ', 'åˆ€ç›˜æ‰­çŸ©',
        'No.1åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.2åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.3åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.4åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.5åˆ€ç›˜ç”µæœºæ‰­çŸ©',
        'No.6åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.7åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.8åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.9åˆ€ç›˜ç”µæœºæ‰­çŸ©', 'No.10åˆ€ç›˜ç”µæœºæ‰­çŸ©'
    ]
    
    print("ğŸ” æ£€æŸ¥ç‰¹å¾åç§°å¯¹åº”å…³ç³»...")
    print("=" * 60)
    
    # æ£€æŸ¥æ•°é‡
    print(f"ğŸ“Š CSVæ–‡ä»¶ç‰¹å¾æ•°é‡: {len(csv_names)}")
    print(f"ğŸ“Š app.pyç‰¹å¾æ•°é‡: {len(app_names)}")
    
    if len(csv_names) != len(app_names):
        print("âŒ ç‰¹å¾æ•°é‡ä¸åŒ¹é…ï¼")
        return False
    
    # é€ä¸ªå¯¹æ¯”
    all_match = True
    for i, (csv_name, app_name) in enumerate(zip(csv_names, app_names)):
        if csv_name != app_name:
            print(f"âŒ ç¬¬{i+1}ä¸ªç‰¹å¾ä¸åŒ¹é…:")
            print(f"   CSV: '{csv_name}'")
            print(f"   APP: '{app_name}'")
            all_match = False
        else:
            print(f"âœ… ç¬¬{i+1}ä¸ªç‰¹å¾åŒ¹é…: {csv_name}")
    
    print("=" * 60)
    if all_match:
        print("ğŸ‰ æ‰€æœ‰ç‰¹å¾åç§°å®Œå…¨åŒ¹é…ï¼")
    else:
        print("âš ï¸  å‘ç°ä¸åŒ¹é…çš„ç‰¹å¾åç§°ï¼")
    
    return all_match

if __name__ == "__main__":
    check_feature_names()
