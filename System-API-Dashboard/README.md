# TBM盾构机实时监控系统

一个现代化的TBM盾构机实时数据监控和可视化系统，提供直观的Web界面来展示31个关键特征的实时数值。

## 🌟 功能特性

### 前端界面
- **左右分栏布局**: 左侧展示TBM盾构机示意图，右侧显示实时数据
- **实时数据更新**: 每2秒自动刷新数据，支持暂停/继续控制
- **数据状态指示**: 清晰显示有效数据、缺失数据、预测填充数据
- **趋势分析**: 显示数据变化趋势（上升/下降/稳定）
- **响应式设计**: 支持桌面和移动设备访问
- **现代化UI**: 使用渐变背景、毛玻璃效果、动画过渡

### 后端API
- **RESTful API**: 提供标准化的数据接口
- **多数据源支持**: 支持真实API数据和模拟数据
- **数据填充策略**: 智能处理缺失数据，支持预测值填充
- **实时数据流**: 多线程数据收集和处理
- **状态监控**: 提供系统运行状态和健康检查

## 📁 文件结构

```
System-API-Dashboard/
├── index.html              # 主页面
├── styles.css              # 样式文件
├── script.js               # 前端JavaScript
├── feature_config.js       # 特征配置
├── app.py                  # 后端API服务器
├── requirements.txt        # Python依赖
├── start.bat              # Windows启动脚本
├── README.md              # 说明文档
└── TBM.png                # TBM盾构机图片
```

## 🚀 快速开始

### 方法1: 使用启动脚本（推荐）
1. 双击运行 `start.bat`
2. 等待依赖安装完成
3. 在浏览器中访问 `http://localhost:5000`

### 方法2: 手动启动
1. 安装Python依赖：
   ```bash
   pip install -r requirements.txt
   ```

2. 启动服务器：
   ```bash
   python app.py
   ```

3. 在浏览器中访问 `http://localhost:5000`

## 📊 数据特征

系统监控31个关键TBM特征：

### 贯入度系统
- 贯入度 (MPa)

### 推进压力系统
- 推进区间的压力（上）(MPa)
- 推进区间的压力（右）(MPa)
- 推进区间的压力（下）(MPa)
- 推进区间的压力（左）(MPa)

### 土舱土压系统
- 土舱土压（右）(MPa)
- 土舱土压（右下）(MPa)
- 土舱土压（左）(MPa)
- 土舱土压（左下）(MPa)

### 推进千斤顶系统
- No.16推进千斤顶速度 (mm/min)
- No.4推进千斤顶速度 (mm/min)
- No.8推进千斤顶速度 (mm/min)
- No.12推进千斤顶速度 (mm/min)
- 推进油缸总推力 (kN)
- No.16推进千斤顶行程 (mm)
- No.4推进千斤顶行程 (mm)
- No.8推进千斤顶行程 (mm)
- No.12推进千斤顶行程 (mm)
- 推进平均速度 (mm/min)

### 刀盘系统
- 刀盘转速 (r/min)
- 刀盘扭矩 (kN·m)

### 刀盘电机扭矩系统
- No.1刀盘电机扭矩 (%)
- No.2刀盘电机扭矩 (%)
- No.3刀盘电机扭矩 (%)
- No.4刀盘电机扭矩 (%)
- No.5刀盘电机扭矩 (%)
- No.6刀盘电机扭矩 (%)
- No.7刀盘电机扭矩 (%)
- No.8刀盘电机扭矩 (%)
- No.9刀盘电机扭矩 (%)
- No.10刀盘电机扭矩 (%)

## 🔧 API接口

### 获取实时数据
```
GET /api/tbm-data
```

### 获取系统状态
```
GET /api/status
```

### 获取特征配置
```
GET /api/features
```

### 获取历史数据
```
GET /api/history
```

### 控制系统
```
POST /api/control
Content-Type: application/json

{
    "action": "start|stop|set_mode",
    "mode": 4
}
```

## 🎮 操作说明

### 键盘快捷键
- `空格键`: 暂停/继续数据更新
- `R键`: 手动刷新数据

### 界面控制
- **暂停/继续按钮**: 控制数据自动更新
- **刷新按钮**: 手动获取最新数据
- **状态指示器**: 显示连接状态和最后更新时间

## 🔧 配置说明

### 数据模式
- **模式1**: 随机生成数据
- **模式2**: API获取数据 + 0填充缺失值
- **模式3**: API获取数据 + 随机值填充缺失值
- **模式4**: API获取数据 + 预测值填充缺失值（默认）

### 更新频率
- 数据更新间隔: 2秒
- 界面刷新: 实时

## 🛠️ 技术栈

### 前端
- HTML5 + CSS3 + JavaScript (ES6+)
- Font Awesome 图标库
- 响应式设计
- 现代CSS特性（Grid、Flexbox、渐变、动画）

### 后端
- Python 3.7+
- Flask Web框架
- Flask-CORS 跨域支持
- 多线程数据处理

### 数据处理
- NumPy 数值计算
- 实时数据流处理
- 智能数据填充算法

## 📱 浏览器支持

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

## 🔍 故障排除

### 常见问题

1. **页面无法访问**
   - 检查服务器是否正常启动
   - 确认端口5000未被占用
   - 检查防火墙设置

2. **数据不更新**
   - 检查浏览器控制台错误信息
   - 确认API接口正常响应
   - 尝试手动刷新

3. **依赖安装失败**
   - 确认Python版本 >= 3.7
   - 尝试使用 `pip install --upgrade pip`
   - 检查网络连接

## 📞 技术支持

如有问题，请检查：
1. 浏览器控制台错误信息
2. 服务器终端输出
3. 网络连接状态
4. Python环境配置

## 📄 许可证

本项目仅供学习和研究使用。
